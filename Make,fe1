# Today - Makefile
#
# (C) Stephen Fryatt, 2006

#Compiler

CC = gcc

# Flags

CCFlags = -mlibscl -mthrowback -Wall -O2 -fno-strict-aliasing
Include = -IC: -ISFlib: -IOSLib:
Links = -lC:o.toolboxlib -lC:o.wimplib -lC:o.eventlib -lC:o.renderlib -lC:o.flexlib -lSFLib:o.SFLib -lOSLib:o.OsLib32

# Final target

OBJS = o.main
      
!RunImage: $(OBJS)
	$(CC) $(CCFlags) $(Include) $(Links) -o !Today/!RunImage $(OBJS)

# Individual source files
#
# NB: init.o is recompiled if compiledate.h changes, which means that it will be re-compiled
# each time the makefile is run.  This is to ensure that the info window date constant is
# updated correctly.

o.main: h.main c.main
	$(CC) $(CCFlags) $(Include) -o o.main -c c.main
